---
import '../styles/global.css';
import SEO from '../components/SEO.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  article?: boolean;
  canonical?: string;
  noindex?: boolean;
  nofollow?: boolean;
  jsonLD?: object | object[];
}

const { 
  title, 
  description, 
  image, 
  article, 
  canonical, 
  noindex, 
  nofollow, 
  jsonLD 
} = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <SEO
      title={title}
      description={description}
      image={image}
      article={article}
      canonical={canonical}
      noindex={noindex}
      nofollow={nofollow}
      jsonLD={jsonLD}
    />
  </head>
  <body>
    <Navbar />
    
    <main>
      <slot />
    </main>
    
    <Footer />

    <!-- AOS Animation Library -->
    <script>
      import AOS from 'aos';
      
      // Initialize AOS
      AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true,
        mirror: false,
        offset: 100,
        delay: 0,
      });

      // Refresh AOS on page navigation (for view transitions)
      document.addEventListener('astro:after-swap', () => {
        AOS.refresh();
      });
    </script>

    <!-- Smooth Scroll for anchor links -->
    <script is:inline>
      document.addEventListener('DOMContentLoaded', () => {
        // Smooth scroll for all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href === '#') return;
            
            e.preventDefault();
            const target = document.querySelector(href);
            
            if (target) {
              const headerOffset = 80;
              const elementPosition = target.getBoundingClientRect().top;
              const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

              window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
              });
            }
          });
        });
      });
    </script>
  </body>
</html>
